{% extends 'app/base.html' %}

{% block title %}Главная - Wildberries Parser{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1 class="mb-4">
            <i class="fas fa-shopping-cart text-primary"></i> 
            Wildberries Parser
        </h1>
        <p class="lead">Парсер товаров с сайта Wildberries для анализа цен и отзывов</p>
    </div>
</div>

<!-- Статистика -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <i class="fas fa-box fa-2x text-primary mb-2"></i>
                <h5 class="card-title">{{ total_products }}</h5>
                <p class="card-text">Всего товаров</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <i class="fas fa-tags fa-2x text-success mb-2"></i>
                <h5 class="card-title">{{ total_categories }}</h5>
                <p class="card-text">Категорий</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <i class="fas fa-search fa-2x text-info mb-2"></i>
                <h5 class="card-title">{{ total_queries }}</h5>
                <p class="card-text">Поисковых запросов</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <i class="fas fa-chart-line fa-2x text-warning mb-2"></i>
                <h5 class="card-title">
                    <a href="{% url 'app:statistics' %}" class="text-decoration-none">
                        Статистика
                    </a>
                </h5>
                <p class="card-text">Подробный анализ</p>
            </div>
        </div>
    </div>
</div>

<!-- Быстрые действия -->
<div class="row mb-4">
    <div class="col-md-6">
        <!-- Блок быстрого поиска удалён -->
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-list"></i> Просмотр товаров</h5>
            </div>
            <div class="card-body">
                <p>Просмотрите все собранные товары с возможностью фильтрации и сортировки.</p>
                <a href="{% url 'app:products_list' %}" class="btn btn-primary">
                    <i class="fas fa-list"></i> Перейти к товарам
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Последние товары -->
{% if recent_products %}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-clock"></i> Последние добавленные товары</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    {% for product in recent_products %}
                    <div class="col-md-6 col-lg-4 mb-3">
                        <div class="card h-100">
                            <div class="card-body">
                                <h6 class="card-title">{{ product.name|truncatechars:50 }}</h6>
                                <div class="mb-2">
                                    {% if product.has_discount %}
                                        <span class="text-decoration-line-through text-muted">{{ product.price }}₽</span>
                                        <span class="discount-price ms-2">{{ product.discount_price }}₽</span>
                                        <span class="badge bg-danger ms-1">-{{ product.discount_percentage }}%</span>
                                    {% else %}
                                        <span class="price">{{ product.price }}₽</span>
                                    {% endif %}
                                </div>
                                {% if product.rating %}
                                    <div class="mb-2">
                                        <span class="rating">
                                            <i class="fas fa-star"></i> {{ product.rating }}
                                        </span>
                                        {% if product.reviews_count %}
                                            <small class="text-muted">({{ product.reviews_count }} отзывов)</small>
                                        {% endif %}
                                    </div>
                                {% endif %}
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">{{ product.category }}</small>
                                    <a href="{% url 'app:product_detail' product.id %}" class="btn btn-sm btn-outline-primary">
                                        Подробнее
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <div class="text-center mt-3">
                    <a href="{% url 'app:products_list' %}" class="btn btn-primary">
                        <i class="fas fa-list"></i> Все товары
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- Инструкция -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-info-circle"></i> Как использовать парсер</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="text-center mb-3">
                            <i class="fas fa-search fa-2x text-primary mb-2"></i>
                            <h6>1. Введите запрос</h6>
                            <p class="text-muted">Укажите название товара или категорию для поиска</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="text-center mb-3">
                            <i class="fas fa-cogs fa-2x text-success mb-2"></i>
                            <h6>2. Запустите парсинг</h6>
                            <p class="text-muted">Система автоматически соберет данные о товарах</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="text-center mb-3">
                            <i class="fas fa-chart-bar fa-2x text-info mb-2"></i>
                            <h6>3. Анализируйте данные</h6>
                            <p class="text-muted">Просматривайте цены, рейтинги и отзывы</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 